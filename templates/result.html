<!DOCTYPE html>
<html>
<head>
    <title>Paper Analysis Result</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<div class="container">
    <h2>üìù Paper Analysis Result</h2>
    <button onclick="downloadPDF()" class="btn">üìÑ Download PDF</button>

    <div class="cards-container">
        {% for section in sections %}
        <div class="card" onclick="openModal('{{ section }}')">
            <h3>{{ section }}</h3>
        </div>
        {% endfor %}
    </div>

    <!-- Modal -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2 id="modal-title"></h2>
            <p id="modal-text"></p>
        </div>
    </div>
</div>

<script>
    const results = {{ results|tojson }};

    function openModal(section){
        document.getElementById("modal-title").innerText = section;
        document.getElementById("modal-text").innerText = results[section];
        document.getElementById("modal").style.display = "block";
    }

    function closeModal(){
        document.getElementById("modal").style.display = "none";
    }

    window.onclick = function(event){
        let modal = document.getElementById("modal");
        if(event.target == modal) closeModal();
    }

    function downloadPDF(){
        let url = "/download_pdf/{{ title }}";
        window.location.href = url;
    }
</script>
</body>
</html>